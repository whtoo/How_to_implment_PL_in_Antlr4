# EP21 TDD重构计划

**创建时间**: 2025-12-21
**目的**: 基于新规范进行测试驱动的重构，确保代码质量和规范符合性
**参考文档**: 架构设计规范.md, 语言规范.md
**状态**: 进行中 (In Progress)

## 1. 重构概述

### 1.1 重构目标

1. **规范符合性**: 确保代码完全符合新制定的规范
2. **测试覆盖率**: 达到≥85%的测试覆盖率要求
3. **架构现代化**: 采用现代编译器架构设计模式
4. **教育价值**: 增强代码的可读性和教学价值
5. **扩展性**: 改进扩展点和插件机制

### 1.2 重构原则

1. **测试先行**: 所有重构必须先写测试，再实现代码
2. **增量重构**: 小步快跑，每次只重构一个模块
3. **持续集成**: 每次提交必须通过所有测试
4. **文档更新**: 代码重构同步更新相关文档
5. **向后兼容**: 保持现有功能的向后兼容性

### 1.3 成功标准

| 指标 | 目标值 | 当前值 | 状态 |
|------|--------|--------|------|
| 测试覆盖率 | ≥85% | 待测量 | ⏸️ |
| 规范符合率 | 100% | 待评估 | ⏸️ |
| 编译警告数 | 0 | 待检查 | ⏸️ |
| 性能回归 | ≤5% | 待测试 | ⏸️ |
| 文档完整性 | 100% | 进行中 | 🔄 |

## 2. 当前状态分析

### 2.1 代码质量评估

基于现有代码分析，识别主要问题区域：

#### 2.1.1 架构问题
- [ ] **分层不清晰**: 前端、中端、后端职责边界模糊
- [ ] **接口不一致**: 模块间接口设计不统一
- [ ] **扩展性不足**: 缺乏清晰的扩展点设计
- [ ] **依赖混乱**: 模块间存在循环依赖

#### 2.1.2 代码问题
- [ ] **测试覆盖率低**: 部分核心模块测试不足
- [ ] **代码重复**: 存在重复的代码逻辑
- [ ] **复杂性高**: 部分函数过于复杂
- [ ] **错误处理不足**: 缺乏统一的错误处理机制

#### 2.1.3 规范问题
- [ ] **命名不规范**: 不符合新的命名约定
- [ ] **类型不安全**: 类型检查不完善
- [ ] **文档缺失**: 缺乏API文档和注释

### 2.2 测试现状

#### 2.2.1 测试覆盖率 (待测量)
```
待运行: mvn jacoco:report
预期模块覆盖率:
- 前端模块: ≥90%
- 优化模块: ≥85%
- 后端模块: ≥80%
- 工具模块: ≥75%
```

#### 2.2.2 测试类型分布
```
待分析现有测试:
- 单元测试比例: ?%
- 集成测试比例: ?%
- 端到端测试比例: ?%
```

## 3. 重构任务分解

### Agent 1: 基础设施重构

#### 阶段1: 测试框架升级 (预计: 2天)
**目标**: 建立现代化的测试基础设施

**任务分解**:
1. **升级JUnit5配置** (第1天)
   - [ ] 创建 `JUnit5配置说明.md` (已完成)
   - [ ] 迁移现有测试到JUnit5
   - [ ] 配置参数化测试和动态测试
   - [ ] 设置测试生命周期管理

2. **测试覆盖率工具配置** (第1天)
   - [ ] 配置JaCoCo覆盖率检查
   - [ ] 设置覆盖率阈值 (≥85%)
   - [ ] 配置CI集成
   - [ ] 生成覆盖率报告

3. **测试工具链完善** (第2天)
   - [ ] 创建测试辅助工具类
   - [ ] 建立测试数据工厂
   - [ ] 配置测试资源管理
   - [ ] 设置性能测试框架

**验收标准**:
- [ ] 所有测试使用JUnit5运行
- [ ] 覆盖率报告正常生成
- [ ] CI构建通过覆盖率检查
- [ ] 测试运行时间<2分钟

#### 阶段2: 构建系统优化 (预计: 1天)
**目标**: 优化Maven构建配置

**任务分解**:
1. **POM文件清理**
   - [ ] 清理不必要的依赖
   - [ ] 统一依赖版本管理
   - [ ] 优化插件配置
   - [ ] 配置代码质量检查

2. **多模块构建优化**
   - [ ] 优化模块间依赖关系
   - [ ] 配置并行构建
   - [ ] 设置增量编译
   - [ ] 优化构建缓存

**验收标准**:
- [ ] 构建时间减少30%
- [ ] 无编译警告
- [ ] 通过所有代码质量检查
- [ ] 支持增量编译

### Agent 2: 前端层重构

#### 阶段1: 词法分析器重构 (预计: 2天)
**目标**: 符合语言规范第3章要求

**测试先行任务**:
1. **创建词法测试套件** (第1天上午)
   - [ ] 标识符测试: 有效和无效标识符
   - [ ] 字面量测试: 各种字面量格式
   - [ ] 关键字测试: 所有关键字识别
   - [ ] 操作符测试: 所有操作符识别
   - [ ] 错误恢复测试: 错误词法单元处理

2. **实现词法分析器重构** (第1天下午-第2天)
   - [ ] 实现Unicode标识符支持
   - [ ] 支持多种数字字面量格式
   - [ ] 改进错误恢复机制
   - [ ] 优化词法分析性能

**代码修改文件**:
- `Cymbol.g4`: 更新词法规则
- `CymbolLexer.java`: 重构词法分析器
- `Token.java`: 增强Token类型信息
- `LexerErrorHandler.java`: 改进错误处理

**验收标准**:
- [ ] 通过所有词法测试
- [ ] 支持完整Unicode标识符
- [ ] 错误恢复机制完善
- [ ] 性能提升20%

#### 阶段2: 语法分析器重构 (预计: 3天)
**目标**: 符合语言规范第4章要求

**测试先行任务**:
1. **创建语法测试套件** (第1天)
   - [ ] 声明测试: 各种声明语法
   - [ ] 语句测试: 控制流语句语法
   - [ ] 表达式测试: 复杂表达式语法
   - [ ] 错误语法测试: 语法错误处理

2. **实现语法分析器重构** (第2-3天)
   - [ ] 重构语法规则消除歧义
   - [ ] 改进错误报告和恢复
   - [ ] 优化语法分析性能
   - [ ] 支持语法扩展机制

**代码修改文件**:
- `Cymbol.g4`: 重构语法规则
- `CymbolParser.java`: 改进解析逻辑
- `ParserErrorHandler.java`: 增强错误处理
- `SyntaxTreeBuilder.java`: 优化语法树构建

**验收标准**:
- [ ] 通过所有语法测试
- [ ] 语法错误信息准确
- [ ] 支持语法错误恢复
- [ ] 解析性能提升15%

#### 阶段3: AST系统重构 (预计: 3天)
**目标**: 符合架构设计规范第3.3节要求

**测试先行任务**:
1. **创建AST测试套件** (第1天)
   - [ ] 节点创建测试: 所有AST节点类型
   - [ ] 访问者模式测试: 遍历和修改
   - [ ] 序列化测试: 序列化和反序列化
   - [ ] 位置信息测试: 源代码位置跟踪

2. **实现AST系统重构** (第2-3天)
   - [ ] 重构AST节点层次结构
   - [ ] 实现不可变AST节点
   - [ ] 增强访问者模式支持
   - [ ] 改进位置信息管理

**代码修改文件**:
- `ASTNode.java`及所有子类
- `ASTVisitor.java`: 重构访问者接口
- `Location.java`: 增强位置信息
- `ASTSerializer.java`: 实现序列化

**验收标准**:
- [ ] 通过所有AST测试
- [ ] AST节点不可变性保证
- [ ] 访问者模式完整支持
- [ ] 位置信息准确跟踪

### Agent 3: 中间表示层重构

#### 阶段1: MIR/LIR系统重构 (预计: 4天)
**目标**: 符合架构设计规范第4章要求

**测试先行任务**:
1. **创建IR测试套件** (第1-2天)
   - [ ] MIR节点测试: 所有MIR节点类型
   - [ ] LIR指令测试: 所有LIR指令类型
   - [ ] 转换测试: AST到MIR, MIR到LIR
   - [ ] 优化测试: IR优化效果验证

2. **实现IR系统重构** (第3-4天)
   - [ ] 重构MIR节点体系
   - [ ] 实现LIR指令集
   - [ ] 改进IR转换算法
   - [ ] 优化IR序列化

**代码修改文件**:
- `MIRNode.java`及所有子类
- `LIRInstruction.java`及所有子类
- `IRConverter.java`: 重构转换逻辑
- `IRSerializer.java`: 实现序列化

**验收标准**:
- [ ] 通过所有IR测试
- [ ] 清晰的MIR/LIR分层
- [ ] 完整的类型信息保留
- [ ] 高效的IR转换算法

#### 阶段2: 控制流图重构 (预计: 3天)
**目标**: 符合架构设计规范第4.4节要求

**测试先行任务**:
1. **创建CFG测试套件** (第1天)
   - [ ] 基本块测试: 块划分和合并
   - [ ] 边关系测试: 前驱后继关系
   - [ ] 可视化测试: DOT/Mermaid输出
   - [ ] 算法测试: 支配树等算法

2. **实现CFG系统重构** (第2-3天)
   - [ ] 重构基本块表示
   - [ ] 改进CFG构建算法
   - [ ] 实现可视化输出
   - [ ] 优化图算法性能

**代码修改文件**:
- `BasicBlock.java`: 重构基本块
- `CFG.java`: 重构控制流图
- `CFGBuilder.java`: 改进构建算法
- `CFGVisualizer.java`: 实现可视化

**验收标准**:
- [ ] 通过所有CFG测试
- [ ] 准确的块划分和边建立
- [ ] 完整的可视化支持
- [ ] 高效的图算法实现

### Agent 4: 优化层重构

#### 阶段1: 数据流分析框架重构 (预计: 4天)
**目标**: 符合架构设计规范第5.2节要求

**测试先行任务**:
1. **创建数据流测试套件** (第1-2天)
   - [ ] 活跃变量分析测试
   - [ ] 到达定义分析测试
   - [ ] 常量传播分析测试
   - [ ] 框架接口测试

2. **实现数据流框架重构** (第3-4天)
   - [ ] 重构统一数据流接口
   - [ ] 实现迭代求解器
   - [ ] 改进格理论实现
   - [ ] 优化分析算法性能

**代码修改文件**:
- `DataFlowAnalysis.java`: 统一接口
- `IterativeSolver.java`: 迭代求解器
- `Lattice.java`: 格理论实现
- 各种具体分析器实现

**验收标准**:
- [ ] 通过所有数据流测试
- [ ] 统一的框架接口
- [ ] 正确的迭代求解
- [ ] 高效的算法实现

#### 阶段2: SSA形式转换重构 (预计: 3天)
**目标**: 符合架构设计规范第5.2.2节要求

**测试先行任务**:
1. **创建SSA测试套件** (第1天)
   - [ ] 支配树计算测试
   - [ ] Φ函数插入测试
   - [ ] 变量重命名测试
   - [ ] SSA破坏测试

2. **实现SSA转换重构** (第2-3天)
   - [ ] 重构支配树算法
   - [ ] 改进Φ函数插入
   - [ ] 优化变量重命名
   - [ ] 实现SSA破坏

**代码修改文件**:
- `DominanceTree.java`: 支配树计算
- `SSAConverter.java`: SSA转换
- `PhiFunction.java`: Φ函数实现
- `SSADestructor.java`: SSA破坏

**验收标准**:
- [ ] 通过所有SSA测试
- [ ] 正确的支配关系计算
- [ ] 准确的Φ函数插入
- [ ] 完整的SSA转换流程

#### 阶段3: 控制流优化重构 (预计: 4天) - **研究生进阶任务**
**目标**: 实现工业级控制流优化，符合高年级研究生进阶模块建议

**测试先行任务**:
1. **创建控制流优化测试套件** (第1-2天)
   - [ ] 循环优化测试: 循环不变量提取、循环展开、循环融合
   - [ ] 条件常量传播测试: 基于条件的常量传播
   - [ ] 跳转线程化测试: 消除冗余跳转
   - [ ] 死代码消除测试: 基于数据流的死代码删除

2. **实现控制流优化重构** (第3-4天)
   - [ ] 实现循环分析框架: 自然循环识别、支配树分析
   - [ ] 实现循环不变量提取算法
   - [ ] 实现条件常量传播优化
   - [ ] 实现跳转线程化优化
   - [ ] 集成死代码消除到优化流水线

**代码修改文件**:
- `LoopAnalysis.java`: 循环分析框架
- `LoopOptimizer.java`: 循环优化器
- `ConditionalConstantPropagation.java`: 条件常量传播
- `JumpThreading.java`: 跳转线程化优化
- `DeadCodeElimination.java`: 死代码消除

**验收标准**:
- [ ] 通过所有控制流优化测试
- [ ] 循环优化正确识别和优化循环
- [ ] 条件常量传播准确传播常量
- [ ] 跳转线程化消除冗余控制流
- [ ] 死代码消除显著减少代码大小

### Agent 5: 后端层重构

#### 阶段1: 代码生成器重构 (预计: 3天)
**目标**: 符合架构设计规范第6.1节要求

**测试先行任务**:
1. **创建代码生成测试套件** (第1天)
   - [ ] 指令选择测试
   - [ ] 寄存器分配测试
   - [ ] 目标代码测试
   - [ ] 优化效果测试

2. **实现代码生成器重构** (第2-3天)
   - [ ] 重构代码生成接口
   - [ ] 改进指令选择算法
   - [ ] 实现寄存器分配
   - [ ] 优化代码生成质量

**代码修改文件**:
- `CodeGenerator.java`: 重构接口
- `InstructionSelector.java`: 指令选择
- `RegisterAllocator.java`: 寄存器分配
- `TargetCodeEmitter.java`: 目标代码生成

**验收标准**:
- [ ] 通过所有代码生成测试
- [ ] 高效的指令选择
- [ ] 优化的寄存器分配
- [ ] 高质量的目标代码

#### 阶段2: 指令调度重构 (预计: 3天) - **研究生进阶任务**
**目标**: 实现工业级指令调度，提高指令级并行性

**测试先行任务**:
1. **创建指令调度测试套件** (第1天)
   - [ ] 列表调度算法测试
   - [ ] 关键路径调度测试
   - [ ] 资源约束调度测试
   - [ ] 调度效果评估测试

2. **实现指令调度重构** (第2-3天)
   - [ ] 实现依赖分析框架: 数据依赖、控制依赖、资源依赖
   - [ ] 实现列表调度算法
   - [ ] 实现关键路径调度算法
   - [ ] 实现资源模型和冲突检测
   - [ ] 集成调度器到代码生成流水线

**代码修改文件**:
- `DependencyAnalysis.java`: 依赖分析框架
- `ListScheduler.java`: 列表调度算法
- `CriticalPathScheduler.java`: 关键路径调度算法
- `ResourceModel.java`: 资源模型
- `InstructionScheduler.java`: 统一调度接口

**验收标准**:
- [ ] 通过所有指令调度测试
- [ ] 依赖分析准确识别各种依赖关系
- [ ] 调度算法提高指令级并行性
- [ ] 资源冲突正确处理
- [ ] 调度后代码性能提升显著

#### 阶段3: 高级寄存器分配重构 (预计: 4天) - **研究生进阶任务**
**目标**: 实现图着色等高级寄存器分配算法

**测试先行任务**:
1. **创建高级寄存器分配测试套件** (第1-2天)
   - [ ] 图着色算法测试
   - [ ] 线性扫描算法测试
   - [ ] 溢出处理测试
   - [ ] 分配效果评估测试

2. **实现高级寄存器分配重构** (第3-4天)
   - [ ] 实现干涉图构建算法
   - [ ] 实现图着色寄存器分配
   - [ ] 实现线性扫描寄存器分配
   - [ ] 实现智能溢出处理策略
   - [ ] 实现分配效果评估工具

**代码修改文件**:
- `InterferenceGraph.java`: 干涉图表示
- `GraphColoringAllocator.java`: 图着色分配器
- `LinearScanAllocator.java`: 线性扫描分配器
- `SpillHeuristic.java`: 溢出启发式算法
- `AllocationEvaluator.java`: 分配效果评估

**验收标准**:
- [ ] 通过所有高级寄存器分配测试
- [ ] 图着色算法正确分配寄存器
- [ ] 线性扫描算法高效运行
- [ ] 溢出处理最小化内存访问
- [ ] 寄存器分配显著提升性能

## 4. 测试策略

### 4.1 测试金字塔模型

```
        端到端测试 (10%)
            ^
            |
      集成测试 (30%)
            ^
            |
      单元测试 (60%) - 基础
```

### 4.2 测试类型定义

#### 4.2.1 单元测试 (Unit Tests)
- **测试粒度**: 单个类或方法
- **覆盖率目标**: ≥85%
- **框架**: JUnit 5 + AssertJ
- **执行频率**: 每次提交

**测试范围**:
- AST节点创建和操作
- IR指令生成和优化
- 数据流分析算法
- 符号表操作

#### 4.2.2 集成测试 (Integration Tests)
- **测试粒度**: 模块间协作
- **验证目标**: 接口契约
- **框架**: JUnit 5 + 测试容器
- **执行频率**: 每日构建

**测试场景**:
- 完整编译流程
- 模块间数据传递
- 错误传播路径
- 性能边界条件

#### 4.2.3 端到端测试 (End-to-End Tests)
- **测试粒度**: 完整系统
- **验证目标**: 用户场景
- **框架**: 自定义测试运行器
- **执行频率**: 发布前

**测试场景**:
- 标准程序编译和执行
- 错误处理用户体验
- 工具链完整工作流
- 性能回归测试

### 4.3 测试数据管理

#### 4.3.1 测试数据分类
```
test-data/
├── valid/          # 有效程序
│   ├── simple/     # 简单程序
│   ├── complex/    # 复杂程序
│   └── edge-cases/ # 边界情况
├── invalid/        # 无效程序
│   ├── syntax/     # 语法错误
│   ├── semantic/   # 语义错误
│   └── type/       # 类型错误
└── performance/    # 性能测试程序
```

#### 4.3.2 测试数据生成
1. **手动编写**: 核心测试用例
2. **程序生成**: 随机测试生成
3. **外部测试套件**: 标准测试程序
4. **用户程序收集**: 真实使用场景

### 4.4 测试执行策略

#### 4.4.1 本地开发测试
```bash
# 快速测试 (开发时)
mvn test -Dtest=*Test -DfailIfNoTests=false

# 完整测试 (提交前)
mvn clean test

# 覆盖率检查
mvn jacoco:check
```

#### 4.4.2 CI/CD流水线
```yaml
stages:
  - test
  - coverage
  - integration
  - e2e

jobs:
  unit-tests:
    stage: test
    script: mvn test

  coverage-check:
    stage: coverage
    script: mvn jacoco:check

  integration-tests:
    stage: integration
    script: mvn verify -Pintegration

  e2e-tests:
    stage: e2e
    script: ./scripts/run-e2e-tests.sh
```

## 5. 进度跟踪

### 5.1 重构状态看板

#### 待开始 (To Do)
- [ ] 基础设施重构
- [ ] 前端层重构
- [ ] 中间表示层重构
- [ ] 优化层重构
- [ ] 后端层重构

#### 进行中 (In Progress)
- [ ] 规范文档编写 (当前)
- [ ] TDD计划制定 (当前)

#### 已完成 (Done)
- [ ] 规范体系设计
- [ ] 架构设计规范
- [ ] 语言规范
- [ ] TDD重构计划

### 5.2 关键里程碑

#### 里程碑1: 基础设施完成 (预计: 2025-12-23)
- [ ] 测试框架升级完成
- [ ] 构建系统优化完成
- [ ] 基础测试套件建立

#### 里程碑2: 前端层完成 (预计: 2025-12-30)
- [ ] 词法分析器重构完成
- [ ] 语法分析器重构完成
- [ ] AST系统重构完成

#### 里程碑3: 中间表示层完成 (预计: 2026-01-06)
- [ ] MIR/LIR系统重构完成
- [ ] 控制流图重构完成

#### 里程碑4: 优化层完成 (预计: 2026-01-20)
- [ ] 数据流分析框架完成
- [ ] SSA形式转换完成
- [ ] 控制流优化重构完成 (研究生进阶任务)

#### 里程碑5: 后端层完成 (预计: 2026-02-03)
- [ ] 代码生成器重构完成
- [ ] 指令调度重构完成 (研究生进阶任务)
- [ ] 高级寄存器分配重构完成 (研究生进阶任务)
- [ ] 完整测试通过

### 5.3 风险管理和缓解

#### 技术风险
| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 性能回归 | 中 | 高 | 建立性能基准测试 |
| 兼容性破坏 | 低 | 高 | 保持向后兼容性测试 |
| 测试覆盖率下降 | 中 | 中 | 设置覆盖率阈值检查 |
| 重构复杂度高 | 高 | 高 | 采用增量重构策略 |

#### 资源风险
| 风险 | 概率 | 影响 | 缓解措施 |
|------|------|------|----------|
| 时间不足 | 高 | 高 | 优先级排序，分阶段实施 |
| 人员不足 | 中 | 中 | 明确任务分工，文档完善 |
| 知识缺失 | 低 | 高 | 建立学习资源，结对编程 |

## 6. 质量保证

### 6.1 代码质量标准

#### 6.1.1 静态代码分析
```xml
<!-- Maven配置 -->
<plugins>
  <plugin>checkstyle</plugin>      <!-- 代码风格检查 -->
  <plugin>spotbugs</plugin>        <!-- bug模式检查 -->
  <plugin>pmd</plugin>             <!-- 代码质量检查 -->
  <plugin>jacoco</plugin>          <!-- 覆盖率检查 -->
</plugins>
```

#### 6.1.2 质量阈值
```yaml
质量标准:
  测试覆盖率: ≥85%
  代码重复率: ≤5%
  圈复杂度: ≤10 (方法级)
  认知复杂度: ≤15 (方法级)
  注释密度: ≥20%
  无编译警告: 必须
  无静态检查错误: 必须
```

### 6.2 文档质量标准

#### 6.2.1 文档完整性检查
- [ ] 所有公开API有完整文档
- [ ] 所有配置选项有说明
- [ ] 所有错误代码有解释
- [ ] 所有示例程序可运行

#### 6.2.2 文档准确性检查
- [ ] 文档与代码实现一致
- [ ] 示例程序通过测试
- [ ] API文档有使用示例
- [ ] 错误处理有完整说明

## 7. 沟通和协作

### 7.1 团队协作规范

#### 7.1.1 代码审查流程
1. **预提交检查**:
   - 通过所有测试
   - 通过静态代码分析
   - 满足覆盖率要求
   - 更新相关文档

2. **代码审查要点**:
   - 是否符合规范要求
   - 是否有测试覆盖
   - 是否有性能影响
   - 是否保持向后兼容

3. **合并标准**:
   - 至少1人审查通过
   - CI构建全部通过
   - 无未解决的讨论

#### 7.1.2 进度同步机制
- **每日站会**: 15分钟进度同步
- **每周评审**: 进度和问题评审
- **里程碑回顾**: 经验总结和改进

### 7.2 知识管理

#### 7.2.1 文档维护
```
docs/
├── specifications/    # 规范文档
│   ├── architecture/ # 架构规范
│   ├── language/     # 语言规范
│   └── api/          # API规范
├── guides/           # 指南文档
│   ├── development/  # 开发指南
│   ├ testing/        # 测试指南
│   └── extension/    # 扩展指南
└── references/       # 参考文档
    ├── error-codes/  # 错误代码
    ├── examples/     # 示例程序
    └── cheatsheets/  # 速查表
```

#### 7.2.2 学习资源
- **编译原理基础**: 推荐阅读列表
- **架构设计模式**: 设计模式应用指南
- **测试驱动开发**: TDD实践指南
- **性能优化**: 性能分析和优化指南

## 8. 附录

### 8.1 工具链配置

#### 开发环境
```bash
# 必需工具
- Java 21+
- Maven 3.6+
- Git 2.30+
- IDE: IntelliJ IDEA或VS Code

# 可选工具
- Docker (用于CI/CD)
- JMH (用于性能测试)
- JProfiler (用于性能分析)
```

#### 测试环境
```bash
# 单元测试
mvn test

# 集成测试
mvn verify -Pintegration

# 覆盖率报告
mvn jacoco:report
open target/site/jacoco/index.html

# 性能测试
mvn test -Dtest=PerformanceTest
```

### 8.2 常用命令参考

#### 构建命令
```bash
# 清理和编译
mvn clean compile

# 运行测试
mvn test

# 生成文档
mvn javadoc:javadoc

# 打包发布
mvn package
```

#### 测试命令
```bash
# 运行特定测试类
mvn test -Dtest=CompilerTest

# 运行测试模式
mvn test -Dtest="*Test"

# 生成覆盖率报告
mvn jacoco:report
```

#### 代码质量检查
```bash
# 代码风格检查
mvn checkstyle:check

# bug模式检查
mvn spotbugs:check

# 代码质量检查
mvn pmd:check
```

---

**计划版本**: 1.0
**制定日期**: 2025-12-21
**预计完成**: 2026-01-20
**负责人**: EP21重构团队

---
*本计划是EP21重构工作的指导文档，所有重构活动应遵循本计划。计划将根据实际情况进行适当调整。*