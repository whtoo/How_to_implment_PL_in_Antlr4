# EP18R 可视化模块 (vizvmr) 测试用例

## 📋 概述

本文档列出了 **vizvmr** 模块的所有测试用例，涵盖事件系统、状态模型、GUI组件、集成测试等各个层面。测试用例按照模块和功能分类，每个用例包含测试描述、预期结果和优先级。

## 🎯 测试用例分类

### TC-100: 事件系统测试用例
#### TC-101: 状态监听器基本功能
| 测试ID | TC-101-001 |
|--------|------------|
| **测试名称** | 寄存器变化事件测试 |
| **测试描述** | 测试寄存器值变化时，VMRStateListener是否正确接收事件 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRStateListener监听器 |
| **测试步骤** | 1. 调用stateModel.updateRegister(1, 100)<br>2. 等待事件触发 |
| **预期结果** | 1. 监听器的registerChanged()方法被调用一次<br>2. 事件中包含正确的寄存器索引(1)和值(100)<br>3. 事件时间戳有效 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-101-002 |
|--------|------------|
| **测试名称** | 内存变化事件测试 |
| **测试描述** | 测试内存值变化时，VMRStateListener是否正确接收事件 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRStateListener监听器 |
| **测试步骤** | 1. 调用stateModel.updateMemory(0x1000, 0x12345678)<br>2. 等待事件触发 |
| **预期结果** | 1. 监听器的memoryChanged()方法被调用一次<br>2. 事件中包含正确的地址(0x1000)和值(0x12345678)<br>3. 内存类型正确识别 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-101-003 |
|--------|------------|
| **测试名称** | 程序计数器变化事件测试 |
| **测试描述** | 测试PC值变化时，VMRStateListener是否正确接收事件 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRStateListener监听器 |
| **测试步骤** | 1. 设置stateModel.setProgramCounter(0x100)<br>2. 调用stateModel.updateProgramCounter(0x104)<br>3. 等待事件触发 |
| **预期结果** | 1. 监听器的pcChanged()方法被调用一次<br>2. 事件中包含正确的旧PC(0x100)和新PC(0x104)<br>3. PC变化原因正确记录 |
| **优先级** | P0 (核心功能) |

#### TC-102: 执行监听器基本功能
| 测试ID | TC-102-001 |
|--------|------------|
| **测试名称** | 指令执行事件测试 |
| **测试描述** | 测试指令执行时，VMRExecutionListener是否正确接收各阶段事件 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRExecutionListener监听器<br>3. 已加载测试程序 |
| **测试步骤** | 1. 模拟指令取指阶段<br>2. 模拟指令解码阶段<br>3. 模拟指令执行阶段 |
| **预期结果** | 1. instructionFetched()方法被调用<br>2. beforeInstructionDecode()方法被调用<br>3. beforeInstructionExecute()方法被调用<br>4. afterInstructionExecute()方法被调用<br>5. 各阶段事件包含正确的指令信息和PC |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-102-002 |
|--------|------------|
| **测试名称** | 虚拟机状态变化事件测试 |
| **测试描述** | 测试虚拟机状态变化时，VMRExecutionListener是否正确接收事件 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRExecutionListener监听器 |
| **测试步骤** | 1. 设置虚拟机状态为RUNNING<br>2. 设置虚拟机状态为PAUSED<br>3. 设置虚拟机状态为STOPPED |
| **预期结果** | 1. vmStateChanged()方法被调用三次<br>2. 每次事件包含正确的旧状态和新状态<br>3. 状态转换时间戳有效 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-102-003 |
|--------|------------|
| **测试名称** | 执行错误事件测试 |
| **测试描述** | 测试执行错误时，VMRExecutionListener是否正确处理 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRExecutionListener监听器 |
| **测试步骤** | 1. 模拟执行错误（如除零错误、非法指令）<br>2. 调用监听器的executionError()方法 |
| **预期结果** | 1. executionError()方法被调用<br>2. 错误信息和PC正确传递<br>3. 错误处理逻辑正确执行 |
| **优先级** | P1 (重要功能) |

#### TC-103: 批量事件处理
| 测试ID | TC-103-001 |
|--------|------------|
| **测试名称** | 批量寄存器更新测试 |
| **测试描述** | 测试批量寄存器更新时，性能优化功能是否正常工作 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRStateListener监听器 |
| **测试步骤** | 1. 创建多个RegisterChangeEvent事件<br>2. 调用listener.registersUpdated()方法<br>3. 验证事件处理 |
| **预期结果** | 1. registersUpdated()方法正确处理批量事件<br>2. 每个事件都被正确处理<br>3. 性能优于逐个触发事件 |
| **优先级** | P2 (性能优化) |

| 测试ID | TC-103-002 |
|--------|------------|
| **测试名称** | 批量内存更新测试 |
| **测试描述** | 测试批量内存更新时，性能优化功能是否正常工作 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已注册VMRStateListener监听器 |
| **测试步骤** | 1. 创建多个MemoryChangeEvent事件<br>2. 调用listener.memoryUpdated()方法<br>3. 验证事件处理 |
| **预期结果** | 1. memoryUpdated()方法正确处理批量事件<br>2. 每个事件都被正确处理<br>3. 性能优于逐个触发事件 |
| **优先级** | P2 (性能优化) |

### TC-200: 状态模型测试用例
#### TC-201: 状态管理基本功能
| 测试ID | TC-201-001 |
|--------|------------|
| **测试名称** | 寄存器状态管理测试 |
| **测试描述** | 测试VMRStateModel是否正确管理寄存器状态 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 更新多个寄存器值<br>2. 读取寄存器值验证<br>3. 测试边界情况 |
| **预期结果** | 1. 寄存器值正确存储和检索<br>2. 寄存器索引边界检查有效<br>3. 默认寄存器值正确（r0=0） |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-201-002 |
|--------|------------|
| **测试名称** | 内存状态管理测试 |
| **测试描述** | 测试VMRStateModel是否正确管理内存状态 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 更新多个内存地址的值<br>2. 读取内存值验证<br>3. 测试边界情况 |
| **预期结果** | 1. 内存值正确存储和检索<br>2. 内存地址边界检查有效<br>3. 内存类型正确区分（堆、全局、栈） |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-201-003 |
|--------|------------|
| **测试名称** | 调用栈管理测试 |
| **测试描述** | 测试VMRStateModel是否正确管理调用栈 |
| **前置条件** | 1. 已创建VMRStateModel实例<br>2. 已创建StackFrame对象 |
| **测试步骤** | 1. 推入多个栈帧<br>2. 弹出栈帧<br>3. 检查栈帧信息 |
| **预期结果** | 1. 栈帧正确推入和弹出<br>2. 栈深度正确计算<br>3. 栈溢出正确处理<br>4. 栈帧信息正确存储 |
| **优先级** | P0 (核心功能) |

#### TC-202: 修改追踪功能
| 测试ID | TC-202-001 |
|--------|------------|
| **测试名称** | 寄存器修改标记测试 |
| **测试描述** | 测试寄存器修改标记功能是否正常工作 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 更新寄存器值<br>2. 检查修改标记<br>3. 清除修改标记<br>4. 再次检查 |
| **预期结果** | 1. 修改的寄存器正确标记<br>2. 未修改的寄存器未标记<br>3. 清除标记后所有标记被重置 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-202-002 |
|--------|------------|
| **测试名称** | 内存修改标记测试 |
| **测试描述** | 测试内存修改标记功能是否正常工作 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 更新内存值<br>2. 检查修改标记<br>3. 清除修改标记<br>4. 再次检查 |
| **预期结果** | 1. 修改的内存地址正确记录<br>2. 修改集合正确维护<br>3. 清除标记后集合被清空 |
| **优先级** | P1 (重要功能) |

#### TC-203: 执行统计功能
| 测试ID | TC-203-001 |
|--------|------------|
| **测试名称** | 执行步骤计数测试 |
| **测试描述** | 测试执行步骤计数功能是否正常工作 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 多次调用incrementExecutionSteps()<br>2. 读取执行步骤计数<br>3. 重置统计信息 |
| **预期结果** | 1. 执行步骤正确计数<br>2. 重置后计数归零<br>3. 开始时间正确记录 |
| **优先级** | P1 (重要功能) |

### TC-300: 集成层测试用例
#### TC-301: 虚拟机插桩适配器
| 测试ID | TC-301-001 |
|--------|------------|
| **测试名称** | 插桩初始化测试 |
| **测试描述** | 测试VMRInstrumentation是否正确初始化 |
| **前置条件** | 1. 已创建RegisterVMInterpreter实例<br>2. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建VMRInstrumentation实例<br>2. 调用instrument()方法<br>3. 检查插桩状态 |
| **预期结果** | 1. 插桩成功执行<br>2. 反射字段正确获取<br>3. 插桩状态正确标记 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-301-002 |
|--------|------------|
| **测试名称** | 状态同步测试 |
| **测试描述** | 测试虚拟机状态同步功能是否正常工作 |
| **前置条件** | 1. 已创建并插桩VMRInstrumentation实例 |
| **测试步骤** | 1. 调用syncRegisters()方法<br>2. 调用syncMemory()方法<br>3. 调用syncCallStack()方法<br>4. 调用syncProgramCounter()方法 |
| **预期结果** | 1. 寄存器状态正确同步<br>2. 内存状态正确同步<br>3. 调用栈状态正确同步<br>4. 程序计数器正确同步 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-301-003 |
|--------|------------|
| **测试名称** | 重复插桩测试 |
| **测试描述** | 测试重复插桩是否正确处理 |
| **前置条件** | 1. 已创建VMRInstrumentation实例 |
| **测试步骤** | 1. 调用instrument()方法两次<br>2. 检查插桩状态 |
| **预期结果** | 1. 第一次插桩成功<br>2. 第二次插桩被忽略或正确处理<br>3. 没有异常抛出 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-301-004 |
|--------|------------|
| **测试名称** | 反射失败处理测试 |
| **测试描述** | 测试反射访问失败时的错误处理 |
| **前置条件** | 1. 已创建VMRInstrumentation实例<br>2. 模拟反射访问失败场景 |
| **测试步骤** | 1. 模拟私有字段访问失败<br>2. 调用instrument()方法<br>3. 检查错误处理 |
| **预期结果** | 1. 错误被正确捕获<br>2. 提供有意义的错误信息<br>3. 系统不会崩溃 |
| **优先级** | P1 (重要功能) |

#### TC-302: 可视化桥接器
| 测试ID | TC-302-001 |
|--------|------------|
| **测试名称** | 桥接器初始化测试 |
| **测试描述** | 测试VMRVisualBridge是否正确初始化 |
| **前置条件** | 1. 已创建RegisterVMInterpreter实例<br>2. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建VMRVisualBridge实例<br>2. 检查初始化状态 |
| **预期结果** | 1. 桥接器成功创建<br>2. 反汇编器正确初始化<br>3. 监听器正确注册 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-302-002 |
|--------|------------|
| **测试名称** | 执行控制测试 |
| **测试描述** | 测试执行控制功能是否正常工作 |
| **前置条件** | 1. 已创建VMRVisualBridge实例<br>2. 已加载测试程序 |
| **测试步骤** | 1. 调用startExecution()方法<br>2. 调用pauseExecution()方法<br>3. 调用resumeExecution()方法<br>4. 调用stopExecution()方法 |
| **预期结果** | 1. 执行成功启动<br>2. 执行正确暂停<br>3. 执行正确恢复<br>4. 执行正确停止 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-302-003 |
|--------|------------|
| **测试名称** | 单步执行测试 |
| **测试描述** | 测试单步执行功能是否正常工作 |
| **前置条件** | 1. 已创建VMRVisualBridge实例<br>2. 已加载测试程序 |
| **测试步骤** | 1. 调用executeSingleInstruction()方法<br>2. 检查程序计数器变化<br>3. 重复执行多次 |
| **预期结果** | 1. 每次执行单条指令<br>2. 程序计数器正确前进<br>3. 状态正确更新 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-302-004 |
|--------|------------|
| **测试名称** | 事件转发测试 |
| **测试描述** | 测试事件转发功能是否正常工作 |
| **前置条件** | 1. 已创建VMRVisualBridge实例<br>2. 已注册监听器 |
| **测试步骤** | 1. 触发状态变化事件<br>2. 触发执行事件<br>3. 检查事件转发 |
| **预期结果** | 1. 事件正确转发给监听器<br>2. 事件内容正确传递<br>3. 没有事件丢失 |
| **优先级** | P0 (核心功能) |

### TC-400: GUI组件测试用例
#### TC-401: 寄存器面板
| 测试ID | TC-401-001 |
|--------|------------|
| **测试名称** | 寄存器面板初始化测试 |
| **测试描述** | 测试RegisterPanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建RegisterPanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 16个寄存器显示组件正确创建<br>3. 布局正确设置 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-401-002 |
|--------|------------|
| **测试名称** | 寄存器值显示测试 |
| **测试描述** | 测试寄存器值是否正确显示 |
| **前置条件** | 1. 已创建RegisterPanel实例<br>2. 已更新寄存器值 |
| **测试步骤** | 1. 更新多个寄存器值<br>2. 调用updateDisplay()方法<br>3. 检查显示内容 |
| **预期结果** | 1. 寄存器值正确显示（十六进制和十进制）<br>2. 特殊寄存器（r0, r13-15）特殊显示<br>3. 修改的寄存器高亮显示 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-401-003 |
|--------|------------|
| **测试名称** | 颜色编码测试 |
| **测试描述** | 测试寄存器颜色编码是否正确 |
| **前置条件** | 1. 已创建RegisterPanel实例 |
| **测试步骤** | 1. 修改不同寄存器<br>2. 检查颜色显示<br>3. 清除修改标记<br>4. 再次检查颜色 |
| **预期结果** | 1. 零寄存器(r0)显示为绿色<br>2. 特殊寄存器(r13-15)显示为蓝色<br>3. 修改的寄存器显示为红色<br>4. 未修改的寄存器显示为灰色 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-401-004 |
|--------|------------|
| **测试名称** | 交互功能测试 |
| **测试描述** | 测试寄存器面板的交互功能 |
| **前置条件** | 1. 已创建RegisterPanel实例 |
| **测试步骤** | 1. 双击寄存器<br>2. 右键点击寄存器<br>3. 测试快捷键 |
| **预期结果** | 1. 双击打开编辑对话框<br>2. 右键显示上下文菜单<br>3. 快捷键正常工作 |
| **优先级** | P2 (增强功能) |

#### TC-402: 内存面板
| 测试ID | TC-402-001 |
|--------|------------|
| **测试名称** | 内存面板初始化测试 |
| **测试描述** | 测试MemoryPanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建MemoryPanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 内存表格正确创建<br>3. 滚动功能可用 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-402-002 |
|--------|------------|
| **测试名称** | 内存值显示测试 |
| **测试描述** | 测试内存值是否正确显示 |
| **前置条件** | 1. 已创建MemoryPanel实例<br>2. 已更新内存值 |
| **测试步骤** | 1. 更新多个内存地址的值<br>2. 调用updateDisplay()方法<br>3. 检查显示内容 |
| **预期结果** | 1. 内存地址和值正确显示<br>2. 支持十六进制/十进制/ASCII显示模式<br>3. 修改的内存地址高亮显示 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-402-003 |
|--------|------------|
| **测试名称** | 搜索和导航测试 |
| **测试描述** | 测试内存搜索和导航功能 |
| **前置条件** | 1. 已创建MemoryPanel实例 |
| **测试步骤** | 1. 使用搜索功能查找特定值<br>2. 跳转到特定地址<br>3. 测试地址范围查看 |
| **预期结果** | 1. 搜索功能正常工作<br>2. 地址跳转正确执行<br>3. 范围查看功能正常 |
| **优先级** | P1 (重要功能) |

#### TC-403: 代码面板
| 测试ID | TC-403-001 |
|--------|------------|
| **测试名称** | 代码面板初始化测试 |
| **测试描述** | 测试CodePanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRVisualBridge实例<br>2. 已加载测试程序 |
| **测试步骤** | 1. 创建CodePanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 反汇编代码正确显示<br>3. 滚动功能可用 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-403-002 |
|--------|------------|
| **测试名称** | PC高亮测试 |
| **测试描述** | 测试当前PC位置是否正确高亮 |
| **前置条件** | 1. 已创建CodePanel实例<br>2. 已加载测试程序 |
| **测试步骤** | 1. 设置不同PC值<br>2. 检查高亮显示 |
| **预期结果** | 1. 当前PC行正确高亮（黄色背景）<br>2. 执行过的指令正确标记（浅绿背景）<br>3. 高亮随PC变化更新 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-403-003 |
|--------|------------|
| **测试名称** | 断点标记测试 |
| **测试描述** | 测试断点标记功能 |
| **前置条件** | 1. 已创建CodePanel实例 |
| **测试步骤** | 1. 设置多个断点<br>2. 清除断点<br>3. 检查断点显示 |
| **预期结果** | 1. 断点正确标记（红色圆点）<br>2. 断点设置/清除操作正常<br>3. 断点状态正确显示 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-403-004 |
|--------|------------|
| **测试名称** | 代码交互测试 |
| **测试描述** | 测试代码面板的交互功能 |
| **前置条件** | 1. 已创建CodePanel实例 |
| **测试步骤** | 1. 点击行设置断点<br>2. 右键显示菜单<br>3. 双击跳转到地址 |
| **预期结果** | 1. 点击正确设置/清除断点<br>2. 右键菜单正常显示<br>3. 双击跳转功能正常 |
| **优先级** | P1 (重要功能) |

#### TC-404: 调用栈面板
| 测试ID | TC-404-001 |
|--------|------------|
| **测试名称** | 调用栈面板初始化测试 |
| **测试描述** | 测试StackPanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建StackPanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 栈帧列表正确创建<br>3. 展开/折叠功能可用 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-404-002 |
|--------|------------|
| **测试名称** | 栈帧显示测试 |
| **测试描述** | 测试栈帧信息是否正确显示 |
| **前置条件** | 1. 已创建StackPanel实例<br>2. 已更新调用栈 |
| **测试步骤** | 1. 推入多个栈帧<br>2. 弹出栈帧<br>3. 检查显示内容 |
| **预期结果** | 1. 栈帧信息正确显示（函数名、返回地址）<br>2. 栈深度正确显示<br>3. 当前栈帧高亮显示 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-404-003 |
|--------|------------|
| **测试名称** | 局部变量显示测试 |
| **测试描述** | 测试局部变量信息是否正确显示 |
| **前置条件** | 1. 已创建StackPanel实例<br>2. 栈帧包含局部变量信息 |
| **测试步骤** | 1. 展开栈帧查看局部变量<br>2. 折叠栈帧<br>3. 检查显示内容 |
| **预期结果** | 1. 局部变量正确显示<br>2. 展开/折叠功能正常<br>3. 变量值正确显示 |
| **优先级** | P1 (重要功能) |

#### TC-405: 控制面板
| 测试ID | TC-405-001 |
|--------|------------|
| **测试名称** | 控制面板初始化测试 |
| **测试描述** | 测试ControlPanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRVisualBridge实例 |
| **测试步骤** | 1. 创建ControlPanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 所有控制按钮正确创建<br>3. 按钮状态正确初始化 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-405-002 |
|--------|------------|
| **测试名称** | 按钮功能测试 |
| **测试描述** | 测试控制按钮功能是否正常工作 |
| **前置条件** | 1. 已创建ControlPanel实例<br>2. 已连接VMRVisualBridge |
| **测试步骤** | 1. 点击开始按钮<br>2. 点击暂停按钮<br>3. 点击停止按钮<br>4. 点击单步按钮 |
| **预期结果** | 1. 开始按钮触发startExecution()<br>2. 暂停按钮触发pauseExecution()<br>3. 停止按钮触发stopExecution()<br>4. 单步按钮触发executeSingleInstruction() |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-405-003 |
|--------|------------|
| **测试名称** | 按钮状态管理测试 |
| **测试描述** | 测试按钮状态是否正确管理 |
| **前置条件** | 1. 已创建ControlPanel实例 |
| **测试步骤** | 1. 在不同执行状态下检查按钮状态<br>2. 测试状态转换时的按钮更新 |
| **预期结果** | 1. 空闲状态：开始按钮可用，其他按钮禁用<br>2. 运行状态：暂停/停止按钮可用，开始按钮禁用<br>3. 暂停状态：继续/停止按钮可用，暂停按钮禁用 |
| **优先级** | P1 (重要功能) |

#### TC-406: 状态面板
| 测试ID | TC-406-001 |
|--------|------------|
| **测试名称** | 状态面板初始化测试 |
| **测试描述** | 测试StatusPanel是否正确初始化 |
| **前置条件** | 1. 已创建VMRStateModel实例 |
| **测试步骤** | 1. 创建StatusPanel实例<br>2. 检查组件创建 |
| **预期结果** | 1. 面板成功创建<br>2. 状态信息组件正确创建<br>3. 布局正确设置 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-406-002 |
|--------|------------|
| **测试名称** | 状态信息显示测试 |
| **测试描述** | 测试状态信息是否正确显示 |
| **前置条件** | 1. 已创建StatusPanel实例 |
| **测试步骤** | 1. 更新执行统计信息<br>2. 更新虚拟机状态<br>3. 检查显示内容 |
| **预期结果** | 1. 执行指令数正确显示<br>2. 运行时间正确显示<br>3. 虚拟机状态正确显示<br>4. 性能指标正确显示 |
| **优先级** | P0 (核心功能) |

### TC-500: 集成测试用例
#### TC-501: 端到端功能测试
| 测试ID | TC-501-001 |
|--------|------------|
| **测试名称** | 完整程序加载和执行测试 |
| **测试描述** | 测试从程序加载到完整执行的全流程 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备测试汇编程序 |
| **测试步骤** | 1. 加载汇编程序<br>2. 单步执行每条指令<br>3. 检查所有面板更新<br>4. 连续执行程序<br>5. 检查最终结果 |
| **预期结果** | 1. 程序正确加载<br>2. 单步执行正常工作<br>3. 所有面板正确更新<br>4. 连续执行正常完成<br>5. 最终结果正确 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-501-002 |
|--------|------------|
| **测试名称** | 断点调试流程测试 |
| **测试描述** | 测试完整的断点调试流程 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备测试汇编程序 |
| **测试步骤** | 1. 设置多个断点<br>2. 开始执行到第一个断点<br>3. 检查寄存器/内存状态<br>4. 单步执行几条指令<br>5. 继续执行到下一个断点<br>6. 清除断点继续执行 |
| **预期结果** | 1. 断点正确设置和命中<br>2. 执行在断点处正确暂停<br>3. 状态检查功能正常<br>4. 单步执行正常工作<br>5. 断点清除功能正常 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-501-003 |
|--------|------------|
| **测试名称** | 执行历史记录和回放测试 |
| **测试描述** | 测试执行历史记录和回放功能 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备测试汇编程序 |
| **测试步骤** | 1. 执行一段程序<br>2. 查看执行历史<br>3. 回退到历史状态<br>4. 从历史状态继续执行<br>5. 保存和加载历史记录 |
| **预期结果** | 1. 执行历史正确记录<br>2. 历史状态正确回退<br>3. 从历史状态继续执行正常<br>4. 历史记录保存/加载功能正常 |
| **优先级** | P1 (重要功能) |

#### TC-502: 性能测试
| 测试ID | TC-502-001 |
|--------|------------|
| **测试名称** | 界面响应性能测试 |
| **测试描述** | 测试界面在高频更新下的响应性能 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备高频更新测试程序 |
| **测试步骤** | 1. 执行高频更新程序（如快速循环）<br>2. 测量界面更新延迟<br>3. 检查内存使用情况<br>4. 监控CPU使用率 |
| **预期结果** | 1. 界面更新延迟 < 100ms<br>2. 内存使用稳定，无持续增长<br>3. CPU使用率合理<br>4. 无界面卡顿或冻结 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-502-002 |
|--------|------------|
| **测试名称** | 大程序处理性能测试 |
| **测试描述** | 测试处理大型程序时的性能 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备大型汇编程序（>1000条指令） |
| **测试步骤** | 1. 加载大型程序<br>2. 测量加载时间<br>3. 执行程序<br>4. 测量执行性能<br>5. 检查内存使用 |
| **预期结果** | 1. 加载时间 < 5秒<br>2. 执行性能可接受<br>3. 内存使用合理<br>4. 界面响应正常 |
| **优先级** | P2 (性能要求) |

#### TC-503: 兼容性测试
| 测试ID | TC-503-001 |
|--------|------------|
| **测试名称** | Java版本兼容性测试 |
| **测试描述** | 测试在不同Java版本下的兼容性 |
| **前置条件** | 1. 准备不同Java版本环境（JDK 17, 21, 23） |
| **测试步骤** | 1. 在每个Java版本下编译vizvmr<br>2. 运行测试套件<br>3. 执行示例程序 |
| **预期结果** | 1. 在所有支持的Java版本下成功编译<br>2. 测试套件全部通过<br>3. 示例程序正常运行 |
| **优先级** | P1 (兼容性要求) |

| 测试ID | TC-503-002 |
|--------|------------|
| **测试名称** | 操作系统兼容性测试 |
| **测试描述** | 测试在不同操作系统下的兼容性 |
| **前置条件** | 1. 准备不同操作系统环境（Windows, macOS, Linux） |
| **测试步骤** | 1. 在每个操作系统下运行vizvmr<br>2. 执行测试套件<br>3. 检查界面显示 |
| **预期结果** | 1. 在所有操作系统下成功运行<br>2. 功能正常<br>3. 界面显示正确（考虑不同DPI设置） |
| **优先级** | P1 (兼容性要求) |

### TC-600: 错误处理和边界测试用例
#### TC-601: 错误处理测试
| 测试ID | TC-601-001 |
|--------|------------|
| **测试名称** | 虚拟机执行错误处理测试 |
| **测试描述** | 测试虚拟机执行错误时的处理 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备包含错误的测试程序 |
| **测试步骤** | 1. 加载包含错误的程序（如除零错误）<br>2. 执行程序<br>3. 检查错误处理 |
| **预期结果** | 1. 错误被正确捕获<br>2. 错误信息正确显示<br>3. 系统不会崩溃<br>4. 可以继续调试 |
| **优先级** | P0 (核心功能) |

| 测试ID | TC-601-002 |
|--------|------------|
| **测试名称** | 文件加载错误处理测试 |
| **测试描述** | 测试文件加载错误的处理 |
| **前置条件** | 1. 已安装完整vizvmr系统 |
| **测试步骤** | 1. 尝试加载不存在的文件<br>2. 尝试加载格式错误的文件<br>3. 检查错误处理 |
| **预期结果** | 1. 错误被正确捕获<br>2. 有意义的错误信息显示<br>3. 系统状态保持稳定 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-601-003 |
|--------|------------|
| **测试名称** | 内存不足处理测试 |
| **测试描述** | 测试内存不足情况下的处理 |
| **前置条件** | 1. 已安装完整vizvmr系统 |
| **测试步骤** | 1. 模拟内存不足情况<br>2. 执行内存密集型操作<br>3. 检查错误处理 |
| **预期结果** | 1. 内存不足错误被正确捕获<br>2. 优雅降级或提供错误信息<br>3. 系统不会崩溃 |
| **优先级** | P2 (健壮性要求) |

#### TC-602: 边界条件测试
| 测试ID | TC-602-001 |
|--------|------------|
| **测试名称** | 最大调用栈深度测试 |
| **测试描述** | 测试达到最大调用栈深度时的处理 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备深度递归测试程序 |
| **测试步骤** | 1. 执行深度递归程序<br>2. 达到最大调用栈深度<br>3. 检查处理情况 |
| **预期结果** | 1. 栈溢出被正确检测<br>2. 提供有意义的错误信息<br>3. 执行安全停止 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-602-002 |
|--------|------------|
| **测试名称** | 最大执行步骤测试 |
| **测试描述** | 测试达到最大执行步骤时的处理 |
| **前置条件** | 1. 已安装完整vizvmr系统<br>2. 准备无限循环测试程序 |
| **测试步骤** | 1. 执行无限循环程序<br>2. 达到最大执行步骤限制<br>3. 检查处理情况 |
| **预期结果** | 1. 执行步骤限制被正确检测<br>2. 执行被安全停止<br>3. 提供警告信息 |
| **优先级** | P1 (重要功能) |

| 测试ID | TC-602-003 |
|--------|------------|
| **测试名称** | 空程序处理测试 |
| **测试描述** | 测试处理空程序的情况 |
| **前置条件** | 1. 已安装完整vizvmr系统 |
| **测试步骤** | 1. 加载空程序或只有注释的程序<br>2. 尝试执行<br>3. 检查处理情况 |
| **预期结果** | 1. 空程序正确加载（无代码）<br>2. 执行时提供有意义的提示<br>3. 系统状态保持稳定 |
| **优先级** | P2 (健壮性要求) |

## 📋 测试执行计划

### 测试阶段划分
1. **单元测试阶段**：执行TC-100、TC-200系列测试用例
2. **集成测试阶段**：执行TC-300、TC-400系列测试用例
3. **系统测试阶段**：执行TC-500系列测试用例
4. **验收测试阶段**：执行TC-600系列测试用例

### 测试环境要求
- **硬件环境**：4GB RAM，2GHz CPU，1280×1024显示分辨率
- **软件环境**：JDK 21，Maven 3.8+，支持的操作系统
- **测试工具**：JUnit 5，AssertJ，Mockito，JaCoCo

### 测试数据准备
需要准备以下测试数据：
1. **简单测试程序**：基本指令测试
2. **复杂测试程序**：函数调用、循环、条件判断
3. **边界测试程序**：最大深度、最大长度测试
4. **错误测试程序**：包含各种错误的程序

## 📊 测试报告模板

### 测试执行报告
```
测试执行报告
=============

项目名称：vizvmr
测试版本：1.0.0
测试日期：2026-01-14
测试人员：[姓名]

测试摘要：
- 总测试用例数：XX
- 通过用例数：XX
- 失败用例数：XX
- 跳过用例数：XX
- 测试通过率：XX%

详细结果：
1. 事件系统测试（TC-100）：XX/XX通过
2. 状态模型测试（TC-200）：XX/XX通过
3. 集成层测试（TC-300）：XX/XX通过
4. GUI组件测试（TC-400）：XX/XX通过
5. 集成测试（TC-500）：XX/XX通过
6. 错误处理测试（TC-600）：XX/XX通过

发现的问题：
1. [问题1描述，严重程度，状态]
2. [问题2描述，严重程度，状态]

建议：
1. [建议1]
2. [建议2]

测试结论：[通过/不通过/有条件通过]
```

### 缺陷报告模板
```
缺陷报告
========

缺陷ID：[自动生成]
标题：[简明描述缺陷]
严重程度：[致命/严重/一般/轻微]
优先级：[P0/P1/P2/P3]
模块：[事件系统/状态模型/GUI/集成]
测试用例ID：[关联的测试用例ID]

描述：
[详细描述缺陷现象]

重现步骤：
1. [步骤1]
2. [步骤2]
3. [步骤3]

预期结果：
[描述期望的行为]

实际结果：
[描述实际观察到的行为]

环境信息：
- 操作系统：[Windows/macOS/Linux]
- Java版本：[JDK版本]
- vizvmr版本：[版本号]
- 其他相关信息：[如有]

附件：
[截图、日志文件等]
```

---

**文档版本**: 1.0  
**创建日期**: 2026-01-14  
**最后更新**: 2026-01-14  
**维护者**: EP18R开发团队
