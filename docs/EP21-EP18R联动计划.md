# EP21-EP18R ç‹¬ç«‹è”åŠ¨ä»»åŠ¡è®¡åˆ’

**ç‰ˆæœ¬**: v1.0 | **æ—¥æœŸ**: 2026-01-07 | **çŠ¶æ€**: å¾…æ‰§è¡Œ
**ç›®çš„**: åè°ƒEP21å’ŒEP18Rä¸¤ä¸ªEPç‹¬ç«‹å¼€å‘ä½†é€šè¿‡æ˜ç¡®æ¥å£å¥‘çº¦è”åŠ¨çš„ä»»åŠ¡è®¡åˆ’
**ç›¸å…³æ–‡æ¡£**:
- EP21: [TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ](../ep21/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ.md) | [æ”¹è¿›è®¡åˆ’](../ep21/docs/æ”¹è¿›è®¡åˆ’.md)
- EP18R: [TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ](../ep18r/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ.md) | [TDDé‡æ„è®¡åˆ’](../ep18r/docs/TDDé‡æ„è®¡åˆ’.md)

---

## 1. æ‰§è¡Œæ‘˜è¦

### å½“å‰çŠ¶æ€
- **EP21**: 563ä¸ªæµ‹è¯•100%é€šè¿‡ âœ… | RegisterVMGeneratorå·²å®ç° âœ…
- **EP18R**: 79ä¸ªæµ‹è¯•100%é€šè¿‡ âœ… | æ ¸å¿ƒVMå®Œæˆ âœ… | 6ä¸ªVMé€‚é…ä»»åŠ¡å¾…å®Œæˆ â¸ï¸

### å›¢é˜Ÿç»“æ„
- **ç‹¬ç«‹çš„å›¢é˜Ÿ/å¼€å‘è€…** - éœ€è¦ä¸¥æ ¼çš„æ¥å£å¥‘çº¦å’ŒåŒæ­¥æœºåˆ¶

### ä¼˜å…ˆçº§å…³æ³¨ç‚¹
1. **åŠŸèƒ½å®Œæ•´æ€§** - ä¼˜å…ˆå®Œæˆæ‰€æœ‰æœªå®Œæˆä»»åŠ¡
2. **æ–‡æ¡£æ›´æ–°** - åŒæ­¥åˆ›å»ºç²¾ç®€ç‰ˆTDDè®¡åˆ’
3. **æµ‹è¯•è¦†ç›–** - æ‰©å±•æµ‹è¯•å¥—ä»¶

---

## 2. EP21 ç‹¬ç«‹ä»»åŠ¡è®¡åˆ’

### ä»»åŠ¡ç»„1: RegisterVMGeneratoræ”¹è¿› (P0)

#### TASK-EP21-CG-01: å®Œå–„å¯„å­˜å™¨åˆ†é…
- **é¢„è®¡å·¥æ—¶**: 16å°æ—¶
- **æ”¹è¿›æ–¹å‘**:
  - å®ç°æ™ºèƒ½å¯„å­˜å™¨åˆ†é…ç­–ç•¥
  - ä¼˜åŒ–å¯„å­˜å™¨é‡ç”¨
  - å‡å°‘ä¸å¿…è¦çš„å¯„å­˜å™¨æº¢å‡º
- **éªŒæ”¶æ ‡å‡†**:
  - å¯„å­˜å™¨åˆ©ç”¨ç‡ â‰¥75%
  - æº¢å‡ºæŒ‡ä»¤å æ¯” â‰¤10%
  - é€šè¿‡æ€§èƒ½åŸºå‡†æµ‹è¯•
- **å…³é”®æ–‡ä»¶**: `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/RegisterVMGenerator.java`

#### TASK-EP21-CG-02: ä¼˜åŒ–æŒ‡ä»¤åºåˆ—
- **é¢„è®¡å·¥æ—¶**: 12å°æ—¶
- **æ”¹è¿›æ–¹å‘**:
  - åˆå¹¶å†—ä½™çš„åŠ è½½/å­˜å‚¨
  - ä¼˜åŒ–å¸¸é‡åŠ è½½
  - åˆ©ç”¨æ›´å¤šEP18RæŒ‡ä»¤ç‰¹æ€§
- **éªŒæ”¶æ ‡å‡†**:
  - æŒ‡ä»¤æ•°å‡å°‘ â‰¥15%
  - ä»£ç ä½“ç§¯å‡å°‘ â‰¥10%
  - ä¿æŒè¯­ä¹‰æ­£ç¡®æ€§
- **å…³é”®æ–‡ä»¶**: `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/RegisterEmitter.java`

#### TASK-EP21-CG-03: å®ç°ä¼˜åŒ–çº§åˆ«æ”¯æŒ
- **é¢„è®¡å·¥æ—¶**: 24å°æ—¶
- **åŠŸèƒ½**: æ”¯æŒ-O0/-O1/-O2ä¼˜åŒ–çº§åˆ«
- **éªŒæ”¶æ ‡å‡†**:
  - æ”¯æŒ3ä¸ªä¼˜åŒ–çº§åˆ«
  - æ€§èƒ½æå‡ â‰¥30% (O2 vs O0)
  - é€šè¿‡å›å½’æµ‹è¯•
- **ä¾èµ–**: TASK-EP21-CG-01, TASK-EP21-CG-02

### ä»»åŠ¡ç»„2: EP18Rä¸“ç”¨æµ‹è¯• (P0)

#### TASK-EP21-TEST-01: EP18Ræµ‹è¯•å¥—ä»¶
- **é¢„è®¡å·¥æ—¶**: 16å°æ—¶
- **æµ‹è¯•èŒƒå›´**:
  - å¯„å­˜å™¨åˆ†é…æµ‹è¯•
  - è°ƒç”¨çº¦å®šæµ‹è¯•
  - æ ˆå¸§å¸ƒå±€æµ‹è¯•
- **éªŒæ”¶æ ‡å‡†**:
  - æ–°å¢ â‰¥50ä¸ªæµ‹è¯•ç”¨ä¾‹
  - è¦†ç›–ç‡ â‰¥90%
- **å…³é”®æ–‡ä»¶**: `/ep21/src/test/java/org/teachfx/antlr4/ep21/integration/EP18EP18RCrossVMTest.java`

#### TASK-EP21-TEST-02: è¯­ä¹‰ç­‰ä»·æ€§æµ‹è¯•
- **é¢„è®¡å·¥æ—¶**: 12å°æ—¶
- **ç›®æ ‡**: éªŒè¯EP18å’ŒEP18Rè¾“å‡ºè¯­ä¹‰ç­‰ä»·æ€§
- **éªŒæ”¶æ ‡å‡†**:
  - â‰¥20ä¸ªæµ‹è¯•ç¨‹åº
  - 100%è¯­ä¹‰ç­‰ä»·
  - æ€§èƒ½å¯¹æ¯”æŠ¥å‘Š

### ä»»åŠ¡ç»„3: æ–‡æ¡£æ›´æ–° (P0)

#### TASK-EP21-DOC-01: æ›´æ–°æ”¹è¿›è®¡åˆ’
- **é¢„è®¡å·¥æ—¶**: 4å°æ—¶
- **å†…å®¹**:
  - åŒæ­¥æœ€æ–°å®ç°çŠ¶æ€
  - æ›´æ–°ä»»åŠ¡å®Œæˆæƒ…å†µ
  - æ·»åŠ EP18Rè”åŠ¨è¯´æ˜
- **å…³é”®æ–‡ä»¶**: `/ep21/docs/æ”¹è¿›è®¡åˆ’.md`

#### TASK-EP21-DOC-02: åˆ›å»ºç²¾ç®€ç‰ˆTDDè®¡åˆ’
- **é¢„è®¡å·¥æ—¶**: 6å°æ—¶
- **æ ¼å¼**: å‚è€ƒEP21ç°æœ‰ç²¾ç®€ç‰ˆ
- **å†…å®¹**:
  - Phaseåˆ’åˆ†å’Œé‡Œç¨‹ç¢‘
  - ä»»åŠ¡çŠ¶æ€è¿½è¸ª
  - ä¸EP18Rè”åŠ¨ä»»åŠ¡
- **è¾“å‡º**: `/ep21/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ_è”åŠ¨ç‰ˆ.md`

---

## 3. EP18R ç‹¬ç«‹ä»»åŠ¡è®¡åˆ’

### ä»»åŠ¡ç»„1: å®ŒæˆVMé€‚é…ä»»åŠ¡ (P0)

#### TASK-18R-VM-01: å®Œå–„IRegisterAllocatoræ¥å£
- **é¢„è®¡å·¥æ—¶**: 4å°æ—¶
- **æ”¹è¿›æ–¹å‘**:
  - æ·»åŠ æ´»è·ƒåŒºé—´æŸ¥è¯¢æ¥å£
  - æ·»åŠ æº¢å‡ºä»£ä»·è®¡ç®—æ¥å£
- **éªŒæ”¶æ ‡å‡†**:
  - æ¥å£æ‰©å±•å®Œæˆ
  - Javadocæ–‡æ¡£å®Œæ•´
- **å…³é”®æ–‡ä»¶**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/IRegisterAllocator.java`

#### TASK-18R-VM-02: å®ç°LinearScanAllocator
- **é¢„è®¡å·¥æ—¶**: 12å°æ—¶
- **æ”¹è¿›æ–¹å‘**:
  - å®ç°å®Œæ•´çš„çº¿æ€§æ‰«æç®—æ³•
  - å¤„ç†æ´»è·ƒåŒºé—´é‡å 
  - å®ç°æ™ºèƒ½æº¢å‡ºç­–ç•¥
- **éªŒæ”¶æ ‡å‡†**:
  - æ­£ç¡®å¤„ç†16ä¸ªç‰©ç†å¯„å­˜å™¨
  - æº¢å‡ºæŒ‡ä»¤å æ¯” â‰¤15%
  - ç®—æ³•å¤æ‚åº¦ O(n log n)
- **å…³é”®æ–‡ä»¶**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/LinearScanAllocator.java`

#### TASK-18R-VM-03: å®Œå–„ByteCodeEncoder
- **é¢„è®¡å·¥æ—¶**: 8å°æ—¶
- **åŠŸèƒ½**: æ”¯æŒ42æ¡æŒ‡ä»¤çš„å®Œæ•´ç¼–ç 
- **éªŒæ”¶æ ‡å‡†**:
  - 42æ¡æŒ‡ä»¤å…¨éƒ¨æ”¯æŒ
  - ç¼–ç æ­£ç¡®æ€§100%
  - å•å…ƒæµ‹è¯•è¦†ç›–
- **å…³é”®æ–‡ä»¶**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/pass/codegen/ByteCodeEncoder.java`

#### TASK-18R-VM-04: å®Œå–„RegisterAssembler
- **é¢„è®¡å·¥æ—¶**: 16å°æ—¶
- **åŠŸèƒ½**: é›†æˆå¯„å­˜å™¨åˆ†é…å™¨
- **éªŒæ”¶æ ‡å‡†**:
  - ç”Ÿæˆå¯æ‰§è¡Œçš„32ä½å­—èŠ‚ç 
  - æ”¯æŒå®Œæ•´çš„Cymbolè¯­è¨€
  - é€šè¿‡é›†æˆæµ‹è¯•
- **å…³é”®æ–‡ä»¶**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/pass/codegen/RegisterAssembler.java`

#### TASK-18R-VM-05: å®ç°RegisterCallingConvention
- **é¢„è®¡å·¥æ—¶**: 8å°æ—¶
- **åŠŸèƒ½**: æ ‡å‡†åŒ–EP18Rè°ƒç”¨çº¦å®š
- **éªŒæ”¶æ ‡å‡†**:
  - ä¸ABIè§„èŒƒ100%ä¸€è‡´
  - æä¾›æ¸…æ™°çš„API
- **è¾“å‡º**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/RegisterCallingConvention.java`

#### TASK-18R-VM-06: å®ç°EP18Râ†’EP21é€‚é…å™¨
- **é¢„è®¡å·¥æ—¶**: 8å°æ—¶
- **åŠŸèƒ½**: è®©EP21èƒ½å¤Ÿè°ƒç”¨EP18Rä»£ç ç”Ÿæˆ
- **éªŒæ”¶æ ‡å‡†**:
  - æ¥å£å®šä¹‰æ¸…æ™°
  - EP21å¯æ— ç¼è°ƒç”¨
- **è¾“å‡º**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/pass/codegen/RegisterVMAdapter.java`

### ä»»åŠ¡ç»„2: æµ‹è¯•æ‰©å±• (P0)

#### TASK-18R-TEST-01: å¯„å­˜å™¨åˆ†é…æµ‹è¯•å¥—ä»¶
- **é¢„è®¡å·¥æ—¶**: 12å°æ—¶
- **éªŒæ”¶æ ‡å‡†**: â‰¥30ä¸ªæµ‹è¯•ç”¨ä¾‹
- **è¾“å‡º**: `/ep18r/src/test/java/org/teachfx/antlr4/ep18r/codegen/RegisterAllocatorTestSuite.java`

#### TASK-18R-TEST-02: ä»£ç ç”Ÿæˆæµ‹è¯•å¥—ä»¶
- **é¢„è®¡å·¥æ—¶**: 12å°æ—¶
- **éªŒæ”¶æ ‡å‡†**: â‰¥40ä¸ªæµ‹è¯•ç”¨ä¾‹
- **è¾“å‡º**: `/ep18r/src/test/java/org/teachfx/antlr4/ep18r/codegen/CodeGenerationTestSuite.java`

### ä»»åŠ¡ç»„3: æ–‡æ¡£æ›´æ–° (P0)

#### TASK-18R-DOC-01: åˆ›å»ºç²¾ç®€ç‰ˆTDDè®¡åˆ’
- **é¢„è®¡å·¥æ—¶**: 8å°æ—¶
- **æ ¼å¼**: å‚è€ƒEP21ç²¾ç®€ç‰ˆ
- **å†…å®¹**:
  - VMé€‚é…ä»»åŠ¡çŠ¶æ€è¿½è¸ª
  - Phaseåˆ’åˆ†å’Œé‡Œç¨‹ç¢‘
  - ä¸EP21è”åŠ¨è¯´æ˜
- **è¾“å‡º**: `/ep18r/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ.md`

#### TASK-18R-DOC-02: æ›´æ–°ç°æœ‰TDDè®¡åˆ’
- **é¢„è®¡å·¥æ—¶**: 4å°æ—¶
- **å†…å®¹**: æ ‡è®°å®Œæˆçš„ä»»åŠ¡ï¼Œæ›´æ–°çŠ¶æ€
- **å…³é”®æ–‡ä»¶**: `/ep18r/docs/TDDé‡æ„è®¡åˆ’.md`

---

## 4. è”åŠ¨åè°ƒè®¡åˆ’

### 4.1 æ¥å£å¥‘çº¦

#### å¥‘çº¦1: ICodeGenerator (EP21å®šä¹‰)
```java
public interface ICodeGenerator {
    CodeGenerationResult generate(Prog program);
    String getTargetVM();
    IEmitter getEmitter();
}
```
- **å®šä¹‰ä½ç½®**: `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/ICodeGenerator.java`
- **éªŒè¯**: é€šè¿‡EP21é›†æˆæµ‹è¯•

#### å¥‘çº¦2: IRegisterAllocator (EP18Rå®šä¹‰)
```java
public interface IRegisterAllocator {
    int allocate(String varName);
    void free(String varName);
    int getRegister(String varName);
    Map<String, Integer> getAllocation();
}
```
- **å®šä¹‰ä½ç½®**: `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/IRegisterAllocator.java`
- **éªŒè¯**: é€šè¿‡EP18Rå•å…ƒæµ‹è¯•

#### å¥‘çº¦3: IRæ ¼å¼ (EP21å®šä¹‰)
- **å®šä¹‰**: LIRèŠ‚ç‚¹ä½“ç³»
- **ä¼ é€’æ–¹å‘**: EP21 â†’ EP18R
- **éªŒè¯**: è¯­ä¹‰ç­‰ä»·æ€§æµ‹è¯•

### 4.2 é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | æ—¶é—´ | EP21æ ‡å¿— | EP18Ræ ‡å¿— | éªŒæ”¶æ ‡å‡† |
|--------|------|----------|-----------|----------|
| M1 | Week 2 | CG-01,02å®Œæˆ | VM-01,02å®Œæˆ | æµ‹è¯•é€šè¿‡ |
| M2 | Week 3 | CG-03, TEST-01å®Œæˆ | VM-03,04,05å®Œæˆ | æ¥å£å¯ç”¨ |
| M3 | Week 4 | TEST-02å®Œæˆ | VM-06å®Œæˆ | é€‚é…å™¨é›†æˆ |
| M4 | Week 5 | DOC-01,02å®Œæˆ | TEST-01,02å®Œæˆ | æ–‡æ¡£åŒæ­¥ |

### 4.3 åŒæ­¥æœºåˆ¶

#### åŒå‘¨åŒæ­¥ä¼šè®®
- **æ—¶é—´**: æ¯ä¸¤å‘¨å‘¨äº”
- **å‚ä¸**: EP21å’ŒEP18Rè´Ÿè´£äºº
- **è®®é¢˜**: è¿›åº¦ã€é—®é¢˜ã€åè°ƒ

#### æ¥å£å˜æ›´é€šçŸ¥
- **æœºåˆ¶**: æ¥å£å˜æ›´éœ€æå‰1å‘¨é€šçŸ¥
- **æµç¨‹**: ææ¡ˆ â†’ è®¨è®º â†’ æ‰¹å‡† â†’ å®æ–½
- **æ–‡æ¡£**: å˜æ›´è®°å½•æ–‡æ¡£

#### é›†æˆæµ‹è¯•è§¦å‘
- **è§¦å‘æ¡ä»¶**: ä»»ä¸€EPå®Œæˆå…³é”®ä»»åŠ¡
- **æ‰§è¡Œ**: è¿è¡Œå®Œæ•´çš„é›†æˆæµ‹è¯•å¥—ä»¶
- **åé¦ˆ**: æµ‹è¯•æŠ¥å‘Šå…±äº«

---

## 5. æ–‡æ¡£æ›´æ–°è®¡åˆ’

### EP21æ–‡æ¡£

| æ–‡æ¡£ | æ“ä½œ | å†…å®¹ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| `/ep21/docs/æ”¹è¿›è®¡åˆ’.md` | æ›´æ–° | æ·»åŠ EP18Rè”åŠ¨è¯´æ˜ | P0 |
| `/ep21/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ_è”åŠ¨ç‰ˆ.md` | æ–°å»º | EP21-EP18Rè”åŠ¨ä»»åŠ¡è¿½è¸ª | P0 |

### EP18Ræ–‡æ¡£

| æ–‡æ¡£ | æ“ä½œ | å†…å®¹ | ä¼˜å…ˆçº§ |
|------|------|------|--------|
| `/ep18r/docs/TDDæ‰§è¡Œè®¡åˆ’_ç²¾ç®€ç‰ˆ.md` | æ–°å»º | å‚è€ƒEP21æ ¼å¼ï¼Œåˆ›å»ºç²¾ç®€ç‰ˆ | P0 |
| `/ep18r/docs/TDDé‡æ„è®¡åˆ’.md` | æ›´æ–° | æ ‡è®°å®Œæˆçš„ä»»åŠ¡ | P0 |

---

## 6. ä»»åŠ¡ä¾èµ–å…³ç³»

```
EP21ä¾§:
TASK-EP21-CG-01 (å¯„å­˜å™¨åˆ†é…)
    â”‚
    â”œâ”€â†’ TASK-EP21-CG-02 (æŒ‡ä»¤ä¼˜åŒ–)
    â”‚       â”‚
    â”‚       â””â”€â†’ TASK-EP21-CG-03 (ä¼˜åŒ–çº§åˆ«)
    â”‚               â”‚
    â”‚               â”œâ”€â†’ TASK-EP21-TEST-01 (æµ‹è¯•å¥—ä»¶)
    â”‚               â”‚       â”‚
    â”‚               â”‚       â””â”€â†’ TASK-EP21-TEST-02 (ç­‰ä»·æ€§æµ‹è¯•)
    â”‚               â”‚               â”‚
    â”‚               â””â”€â†’ TASK-EP21-DOC-01,02 (æ–‡æ¡£)

EP18Rä¾§:
TASK-18R-VM-01 (æ¥å£å®šä¹‰)
    â”‚
    â”œâ”€â†’ TASK-18R-VM-02 (çº¿æ€§æ‰«æåˆ†é…å™¨)
    â”‚       â”‚
    â”‚       â””â”€â†’ TASK-18R-VM-04 (ä»£ç ç”Ÿæˆå™¨)
    â”‚               â”‚
    â”‚               â””â”€â†’ TASK-18R-VM-06 (é€‚é…å™¨)
    â”‚                       â”‚
    â”‚                       â””â”€â†’ TASK-18R-TEST-01,02 (æµ‹è¯•)
    â”‚                               â”‚
    â”‚                               â””â”€â†’ TASK-18R-DOC-01,02 (æ–‡æ¡£)
    â”‚
TASK-18R-VM-03 (å­—èŠ‚ç ç¼–ç å™¨)
    â”‚
    â””â”€â†’ TASK-18R-VM-04 (ä»£ç ç”Ÿæˆå™¨)
    â”‚
TASK-18R-VM-05 (è°ƒç”¨çº¦å®š)
    â”‚
    â””â”€â†’ TASK-18R-VM-06 (é€‚é…å™¨)
```

---

## 7. éªŒæ”¶æ ‡å‡†

### EP21éªŒæ”¶
- [ ] RegisterVMGeneratorå¯„å­˜å™¨åˆ†é…æ”¹è¿›å®Œæˆ
- [ ] æŒ‡ä»¤æ•°å‡å°‘ â‰¥15%
- [ ] æ”¯æŒ3ä¸ªä¼˜åŒ–çº§åˆ«
- [ ] EP18Ræµ‹è¯•å¥—ä»¶ â‰¥50ä¸ªæµ‹è¯•
- [ ] è¯­ä¹‰ç­‰ä»·æ€§100%
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥90%
- [ ] æ–‡æ¡£åŒæ­¥æ›´æ–°

### EP18RéªŒæ”¶
- [ ] 6ä¸ªVMé€‚é…ä»»åŠ¡å…¨éƒ¨å®Œæˆ
- [ ] LinearScanAllocatorå®Œæ•´å®ç°
- [ ] ByteCodeEncoderæ”¯æŒ42æ¡æŒ‡ä»¤
- [ ] RegisterAssembleré›†æˆå®Œæˆ
- [ ] RegisterVMAdapteræ¥å£å®ç°
- [ ] æµ‹è¯•å¥—ä»¶ â‰¥70ä¸ªæµ‹è¯•
- [ ] ç²¾ç®€ç‰ˆTDDè®¡åˆ’åˆ›å»º

### è”åŠ¨éªŒæ”¶
- [ ] æ¥å£å¥‘çº¦ç¨³å®š
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ–‡æ¡£åŒæ­¥å®Œæˆ
- [ ] è¯­ä¹‰ç­‰ä»·æ€§100%

---

## 8. å…³é”®æ–‡ä»¶æ¸…å•

### EP21å…³é”®æ–‡ä»¶
- `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/RegisterVMGenerator.java`
- `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/ICodeGenerator.java`
- `/ep21/src/main/java/org/teachfx/antlr4/ep21/pass/codegen/RegisterEmitter.java`
- `/ep21/src/test/java/org/teachfx/antlr4/ep21/integration/EP18EP18RCrossVMTest.java`
- `/ep21/docs/æ”¹è¿›è®¡åˆ’.md`

### EP18Rå…³é”®æ–‡ä»¶
- `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/IRegisterAllocator.java`
- `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/stackvm/codegen/LinearScanAllocator.java`
- `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/pass/codegen/RegisterAssembler.java`
- `/ep18r/src/main/java/org/teachfx/antlr4/ep18r/pass/codegen/ByteCodeEncoder.java`
- `/ep18r/docs/TDDé‡æ„è®¡åˆ’.md`

---

## 9. æ‰§è¡Œå»ºè®®

### å¹¶è¡Œå¼€å‘ç­–ç•¥
1. **Week 1-2**: EP21å®ŒæˆCG-01,02 | EP18Rå®ŒæˆVM-01,02,03
2. **Week 3**: EP21å®ŒæˆCG-03, TEST-01 | EP18Rå®ŒæˆVM-04,05
3. **Week 4**: EP21å®ŒæˆTEST-02 | EP18Rå®ŒæˆVM-06
4. **Week 5**: åŒæ–¹å®Œæˆæµ‹è¯•å’Œæ–‡æ¡£

### åä½œè¦ç‚¹
- ä½¿ç”¨Gitåˆ†æ”¯éš”ç¦»å¼€å‘
- é€šè¿‡Pull Requestè¿›è¡Œè·¨EPä»£ç å®¡æŸ¥
- å»ºç«‹å…±äº«é¡¹ç›®ç®¡ç†çœ‹æ¿
- æ¥å£å˜æ›´å¿…é¡»æå‰é€šçŸ¥

### è´¨é‡ä¿è¯
- æ¯ä¸ªä»»åŠ¡å®Œæˆåç«‹å³è¿è¡Œæµ‹è¯•
- å…³é”®é‡Œç¨‹ç¢‘è¿›è¡Œé›†æˆæµ‹è¯•
- æ–‡æ¡£ä¸ä»£ç åŒæ­¥æ›´æ–°
- ä¿æŒæµ‹è¯•è¦†ç›–ç‡ â‰¥85%

---

## 10. é£é™©ç®¡ç†

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ | è´Ÿè´£EP |
|------|--------|------|----------|--------|
| æ¥å£å˜æ›´ä¸å…¼å®¹ | ä¸­ | é«˜ | æ¥å£ç‰ˆæœ¬åŒ–ï¼Œå˜æ›´å®¡æ‰¹æµç¨‹ | ä¸¤è€… |
| æ€§èƒ½ç›®æ ‡ä¸è¾¾æ ‡ | ä¸­ | ä¸­ | åˆ†é˜¶æ®µä¼˜åŒ–ï¼ŒåŸºå‡†æµ‹è¯• | EP21 |
| å¯„å­˜å™¨åˆ†é…è´¨é‡ | ä½ | é«˜ | å®ç°å¤šç§ç®—æ³•ï¼Œæ€§èƒ½å¯¹æ¯” | EP18R |
| æµ‹è¯•è¦†ç›–ä¸è¶³ | ä¸­ | ä¸­ | å¼ºåˆ¶è¦†ç›–ç‡é˜ˆå€¼ï¼ŒæŒç»­é›†æˆ | ä¸¤è€… |
| æ–‡æ¡£ä¸åŒæ­¥ | é«˜ | ä½ | æ–‡æ¡£åŒæ­¥æ›´æ–°æµç¨‹ | ä¸¤è€… |

---

## é™„å½•A: å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# EP21æ„å»ºå’Œæµ‹è¯•
mvn clean compile -pl ep21
mvn test -pl ep21 -Dtest=*EP18R*
mvn test -pl ep21 -Dtest=*CrossVM*

# EP18Ræ„å»ºå’Œæµ‹è¯•
mvn clean compile -pl ep18r
mvn test -pl ep18r -Dtest=*ABI*
mvn test -pl ep18r -Dtest=*RegisterVM*

# è·¨EPé›†æˆæµ‹è¯•
mvn test -pl ep21,ep18r
mvn jacoco:report
```

---

## é™„å½•B: ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|------|----------|
| v1.0 | 2026-01-07 | åˆ›å»ºEP21-EP18Rç‹¬ç«‹è”åŠ¨ä»»åŠ¡è®¡åˆ’ |

---

**æœ€åæ›´æ–°**: 2026-01-07
**ç»´æŠ¤è€…**: Claude Code
**çŠ¶æ€**: ğŸ“ ç‹¬ç«‹è”åŠ¨ä»»åŠ¡è®¡åˆ’å®Œæˆ
